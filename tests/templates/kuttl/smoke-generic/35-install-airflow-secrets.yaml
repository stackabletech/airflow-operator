# N.B. secrets should be applied before the cluster to avoid unecessary restarts.
---
apiVersion: kuttl.dev/v1beta1
kind: TestStep
metadata:
  name: install-airflow
timeout: 480
---
apiVersion: v1
kind: Secret
metadata:
  name: admin-user-credentials
type: Opaque
stringData:
  adminUser.username: airflow
  adminUser.firstname: Airflow
  adminUser.lastname: Admin
  adminUser.email: airflow@airflow.com
  adminUser.password: airflow
---
apiVersion: v1
kind: Secret
metadata:
  name: postgresql-metadata
stringData:
  uri: postgresql+psycopg2://airflow:airflow@airflow-postgresql/airflow
---
apiVersion: v1
kind: Secret
metadata:
  name: postgresql-celery
stringData:
  uri: db+postgresql://airflow:airflow@airflow-postgresql/airflow
---
apiVersion: v1
kind: Secret
metadata:
  name: redis-celery
stringData:
  uri: redis://:redis@airflow-redis-master:6379/0
